<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Resume Server - Services Guide</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
        }

        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        h2 {
            color: #34495e;
            margin-top: 30px;
        }

        h3 {
            color: #2980b9;
        }

        code {
            background-color: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e74c3c;
        }

        pre {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 15px;
            overflow-x: auto;
            margin: 15px 0;
        }

        pre code {
            background: none;
            padding: 0;
            color: #333;
        }

        .emoji {
            font-size: 1.2em;
        }

        .status-box {
            background-color: #f0f9ff;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 15px 0;
        }

        .success {
            background-color: #f0fff4;
            border-left-color: #27ae60;
        }

        .warning {
            background-color: #fffbf0;
            border-left-color: #f39c12;
        }

        .error {
            background-color: #fff5f5;
            border-left-color: #e74c3c;
        }

        ul, ol {
            margin: 10px 0;
        }

        li {
            margin: 5px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #f8f9fa;
            font-weight: bold;
        }

        .file-structure {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 15px;
            font-family: monospace;
            white-space: pre-line;
        }

        @media print {
            body {
                margin: 0;
                padding: 15px;
            }

            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body>
    <h1><span class="emoji">ğŸ¤–</span> AI Resume Server - Services Guide</h1>

    <p>This document explains the separated service architecture and how to work with the AI and dataset management services.</p>

    <h2><span class="emoji">ğŸ—ï¸</span> Architecture Overview</h2>

    <p>The AI Resume Server now has a modular service architecture:</p>

    <h3><span class="emoji">ğŸ—‚ï¸</span> Dataset Manager (<code>app/services/dataset_manager.py</code>)</h3>
    <div class="status-box success">
        <ul>
            <li><strong>Purpose:</strong> Manages manual datasets for skills, job titles, industries, certifications, and education keywords</li>
            <li><strong>Dependencies:</strong> None (lightweight, Python standard library only)</li>
            <li><strong>Features:</strong>
                <ul>
                    <li>Industry-specific skill categorization</li>
                    <li>Job title management</li>
                    <li>Certification tracking</li>
                    <li>Education keyword detection</li>
                    <li>Export/import functionality</li>
                    <li>Automatic fallback data creation</li>
                </ul>
            </li>
        </ul>
    </div>

    <h3><span class="emoji">ğŸ¤–</span> AI Service (<code>app/services/ai_service.py</code>)</h3>
    <div class="status-box">
        <ul>
            <li><strong>Purpose:</strong> Handles AI-powered resume analysis, voice processing, and job matching</li>
            <li><strong>Dependencies:</strong> Heavy ML libraries (whisper, transformers, spacy, etc.)</li>
            <li><strong>Features:</strong>
                <ul>
                    <li>Resume text extraction and analysis</li>
                    <li>Voice analysis and transcription</li>
                    <li>Job matching algorithms</li>
                    <li>Industry detection</li>
                    <li>Lazy model loading</li>
                </ul>
            </li>
        </ul>
    </div>

    <h3><span class="emoji">ğŸš€</span> Service Initialization (<code>app/services/__init__.py</code>)</h3>
    <div class="status-box">
        <ul>
            <li><strong>Purpose:</strong> Centralized service management with graceful error handling</li>
            <li><strong>Features:</strong>
                <ul>
                    <li>Graceful dependency handling</li>
                    <li>Service status monitoring</li>
                    <li>Initialization coordination</li>
                </ul>
            </li>
        </ul>
    </div>

    <h2><span class="emoji">ğŸš€</span> Getting Started</h2>

    <h3>1. Check Service Status</h3>
    <pre><code># Check current service status
python3 check_services.py</code></pre>

    <h3>2. Start the Server</h3>
    <pre><code># Using the enhanced startup script
./start_server.sh

# Or directly
python3 run_with_services.py</code></pre>

    <h3>3. Install Dependencies (if needed)</h3>
    <pre><code># Activate virtual environment
source venv/bin/activate

# Install all dependencies
pip install -r requirements.txt</code></pre>

    <h2><span class="emoji">ğŸ“Š</span> Service Status Monitoring</h2>

    <h3>Health Check Endpoint</h3>
    <p>The <code>/api/health</code> endpoint now includes service status:</p>

    <pre><code>{
  "status": "healthy",
  "database": "connected",
  "version": "1.0.0",
  "ai_services": {
    "dataset_manager": {
      "status": "ready",
      "stats": {
        "skills": {
          "total_skills": 148,
          "total_industries": 9
        }
      }
    },
    "ai_service": {
      "status": "ready|unavailable",
      "models_loaded": {
        "whisper": false,
        "sentence_transformer": false,
        "spacy": false
      }
    }
  }
}</code></pre>

    <h2><span class="emoji">âš™ï¸</span> Working with Services</h2>

    <h3>Dataset Manager</h3>

    <h4>Access the Dataset Manager</h4>
    <pre><code>from app.services import dataset_manager

# Get statistics
stats = dataset_manager.get_dataset_stats()

# Add new skills
dataset_manager.add_skills_to_dataset(
    industry="retail",
    category="customer_service",
    skills=["customer support", "pos systems"]
)

# Detect industry from text
industry = dataset_manager.detect_industry("python developer with react experience")</code></pre>

    <h4>Dataset Structure</h4>
    <div class="file-structure">datasets/
â”œâ”€â”€ skills.json           # Skills by industry and category
â”œâ”€â”€ job_titles.json       # Job titles by industry
â”œâ”€â”€ industries.json       # Industry keywords
â”œâ”€â”€ certifications.json   # Certifications by industry
â””â”€â”€ education_keywords.json # Education-related terms</div>

    <h3>AI Service</h3>

    <h4>Access the AI Service (when available)</h4>
    <pre><code>from app.services import ai_service, AI_SERVICE_AVAILABLE

if AI_SERVICE_AVAILABLE:
    # Analyze resume
    analysis = ai_service.analyze_resume(resume_text)

    # Match job requirements
    match_result = ai_service.match_resume_to_job(resume_data, job_requirements)

    # Voice analysis
    voice_analysis = ai_service.analyze_voice(audio_file, transcript)</code></pre>

    <h2><span class="emoji">ğŸ›¡ï¸</span> Graceful Degradation</h2>

    <div class="status-box success">
        <p>The system is designed to work even when AI dependencies are missing:</p>
        <ol>
            <li><strong>Dataset Manager Always Available:</strong> Core functionality for managing datasets works without ML dependencies</li>
            <li><strong>Graceful AI Fallback:</strong> If AI libraries aren't installed, the service reports unavailable status but doesn't crash</li>
            <li><strong>Clear Error Messages:</strong> Users get informative messages about what's available and what's missing</li>
        </ol>
    </div>

    <h2><span class="emoji">ğŸ”§</span> Development Workflow</h2>

    <h3>Adding New Industries</h3>
    <pre><code># Add to dataset manager
dataset_manager.add_skills_to_dataset("new_industry", "category", ["skill1", "skill2"])
dataset_manager.add_job_titles_to_dataset("new_industry", ["title1", "title2"])
dataset_manager.add_certifications_to_dataset("new_industry", ["cert1", "cert2"])</code></pre>

    <h3>Testing Services</h3>
    <pre><code># Test dataset manager only
python3 -c "from app.services.dataset_manager import dataset_manager; print(dataset_manager.get_dataset_stats())"

# Test full service initialization
python3 -c "from app.services import initialize_services; initialize_services()"

# Check service status
python3 check_services.py</code></pre>

    <h2><span class="emoji">ğŸŒ</span> Production Deployment</h2>

    <h3>Environment Setup</h3>
    <ol>
        <li>Ensure all dependencies are installed: <code>pip install -r requirements.txt</code></li>
        <li>Configure environment variables in <code>.env</code></li>
        <li>Use the enhanced startup script: <code>./start_server.sh</code></li>
    </ol>

    <h3>Service Monitoring</h3>
    <ul>
        <li>Monitor the <code>/api/health</code> endpoint for service status</li>
        <li>Check logs for service initialization messages</li>
        <li>Use <code>check_services.py</code> for detailed status reports</li>
    </ul>

    <h3>Performance Considerations</h3>
    <div class="status-box">
        <ul>
            <li><strong>Dataset Manager:</strong> Lightweight, loads quickly</li>
            <li><strong>AI Service:</strong> Heavy models load lazily on first use</li>
            <li><strong>Memory Usage:</strong> Models are only loaded when needed</li>
            <li><strong>Startup Time:</strong> Dataset manager initializes quickly, AI models load on demand</li>
        </ul>
    </div>

    <h2><span class="emoji">ğŸ”</span> Troubleshooting</h2>

    <h3>Common Issues</h3>

    <div class="status-box warning">
        <h4>"AI service dependencies not available"</h4>
        <ul>
            <li><strong>Cause:</strong> ML libraries not installed</li>
            <li><strong>Solution:</strong> <code>pip install -r requirements.txt</code></li>
            <li><strong>Workaround:</strong> Dataset functionality still works</li>
        </ul>
    </div>

    <div class="status-box warning">
        <h4>"Dataset files not found"</h4>
        <ul>
            <li><strong>Cause:</strong> First run or missing dataset files</li>
            <li><strong>Solution:</strong> Automatic - default datasets are created automatically</li>
        </ul>
    </div>

    <div class="status-box error">
        <h4>"Models not loading"</h4>
        <ul>
            <li><strong>Cause:</strong> Insufficient memory or corrupted model files</li>
            <li><strong>Solution:</strong> Check available memory, reinstall model dependencies</li>
        </ul>
    </div>

    <h3>Debug Commands</h3>
    <pre><code># Verbose service checking
python3 -c "from app.services import get_service_status; import json; print(json.dumps(get_service_status(), indent=2))"

# Test dataset creation
python3 -c "from app.services.dataset_manager import DatasetManager; dm = DatasetManager('test_datasets'); print('Test datasets created')"

# Check model loading
python3 -c "from app.services.ai_service import AIService; ai = AIService(); print('AI service created')"</code></pre>

    <h2><span class="emoji">ğŸ“</span> File Structure</h2>

    <div class="file-structure">app/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ __init__.py           # Service coordination and initialization
â”‚   â”œâ”€â”€ dataset_manager.py    # Dataset management (lightweight)
â”‚   â””â”€â”€ ai_service.py         # AI processing (heavy dependencies)
â”œâ”€â”€ main.py                   # FastAPI app with service initialization
check_services.py             # Service status checker
run_with_services.py          # Enhanced startup script
start_server.sh               # Shell startup script
datasets/                     # Auto-created dataset files
â””â”€â”€ requirements.txt          # All dependencies</div>

    <div class="status-box success">
        <p><strong>Summary:</strong> This architecture ensures your AI Resume Server is modular, maintainable, and gracefully handles missing dependencies while providing powerful AI functionality when available.</p>
    </div>

    <div class="no-print" style="margin-top: 40px; padding: 20px; background-color: #f8f9fa; border-radius: 5px;">
        <h3><span class="emoji">ğŸ’¡</span> How to Convert to PDF</h3>
        <ol>
            <li>Open this HTML file in your web browser</li>
            <li>Press <kbd>Ctrl+P</kbd> (or <kbd>Cmd+P</kbd> on Mac)</li>
            <li>Select "Save as PDF" as the destination</li>
            <li>Adjust print settings if needed</li>
            <li>Click "Save"</li>
        </ol>
    </div>
</body>
</html>